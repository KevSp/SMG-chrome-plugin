before_script:
  - apt-get update -qq && apt-get install -y -qq git zip
  - git submodule update --init --recursive
  
stages:
  - build

deploy_extension:
  stage: build
  artifacts: 
    paths:
    - smg-music-display.crx
    - smg-music-display.zip
  script:
    # the crazy stuff is there to ignore the .git folder, be wary, it is /not/ regex!
    - zip smg-music-display.zip -r ./*[!.git]
    - cp smg-music-display.zip smg-music-display.crx